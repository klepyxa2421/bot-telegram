# Розгортання Telegram Music Bot на платформі Vercel

Це інструкція з розгортання бота на платформі Vercel, яка дозволяє запустити бота в режимі webhook безкоштовно.

## Передумови

- Аккаунт на [Vercel](https://vercel.com)
- Аккаунт на GitHub, GitLab або Bitbucket (для push коду)
- Node.js і npm на локальній машині (для розробки та тестування)
- Токен Telegram Bot API (від @BotFather)
- Spotify API credentials (необов'язково, для роботи зі Spotify)

## Крок 1: Підготовка репозиторію

1. Завантажте архів з кодом бота
2. Розпакуйте архів на вашому комп'ютері
3. Ініціалізуйте Git репозиторій:

```bash
cd telegram-music-bot
git init
git add .
git commit -m "Initial commit"
```

4. Створіть новий репозиторій на GitHub, GitLab або Bitbucket
5. Пушніть код:

```bash
git remote add origin https://github.com/your-username/telegram-music-bot.git
git push -u origin main
```

## Крок 2: Розгортання на Vercel

1. Увійдіть в свій аккаунт на [Vercel](https://vercel.com)
2. Натисніть "Add New..." → "Project"
3. Виберіть свій репозиторій та натисніть "Import"
4. Налаштуйте змінні середовища:
   - `TELEGRAM_TOKEN` - ваш токен від @BotFather
   - `SPOTIFY_CLIENT_ID` - ваш Spotify Client ID (необов'язково)
   - `SPOTIFY_CLIENT_SECRET` - ваш Spotify Client Secret (необов'язково)
5. Залиште інші налаштування за замовчуванням і натисніть "Deploy"

## Крок 3: Налаштування Telegram webhook

Після успішного розгортання, вам потрібно налаштувати вебхук для вашого бота. Заміните URL_проекту на URL вашого проекту Vercel.

```
https://api.telegram.org/bot{TELEGRAM_TOKEN}/setWebhook?url={URL_проекту}/api/webhook
```

Наприклад:
```
https://api.telegram.org/bot123456789:ABCDEF-123456789/setWebhook?url=https://telegram-music-bot.vercel.app/api/webhook
```

## Крок 4: Перевірка

1. Відкрийте ваш бот в Telegram
2. Відправте команду `/start`
3. Якщо бот відповідає - вітаємо, все працює!

## Особливості роботи на Vercel

1. **Файлова система**: Vercel використовує тимчасову файлову систему. Це означає, що файли, які ви завантажуєте або створюєте під час виконання, будуть видалені після завершення запиту. Для збереження файлів вам потрібно використовувати зовнішні сховища, такі як AWS S3, Firebase Storage тощо.

2. **Час виконання**: На безкоштовному плані функції Vercel мають обмеження на час виконання - 10 секунд. Якщо ваш бот виконує складні операції, які займають більше часу, вам може знадобитися преміум-план або інша платформа.

3. **Холодний старт**: Serverless функції мають "холодний старт" - перший запит після періоду неактивності може виконуватися довше.

## Підтримка сервісу активним

На безкоштовному плані Vercel не гарантує 100% uptime. Для підтримки бота активним використовуйте один з безкоштовних моніторинг-сервісів, таких як UptimeRobot, щоб періодично пінгувати ваш URL.

1. Зареєструйтеся на [UptimeRobot](https://uptimerobot.com/)
2. Додайте новий моніторинг: "Add New Monitor"
3. Виберіть тип "HTTP(s)"
4. Додайте URL вашого проекту (наприклад, https://telegram-music-bot.vercel.app)
5. Встановіть інтервал моніторингу (наприклад, 5 хвилин)
6. Збережіть налаштування

## Можливі проблеми та їх вирішення

### 1. Бот не відповідає на команди
- Перевірте логи на Vercel Dashboard
- Перевірте, чи правильно налаштований вебхук
- Перевірте, чи правильно встановлені змінні середовища

### 2. Помилки при завантаженні аудіо
- Vercel має обмеження на розмір відповіді (4-5 МБ)
- Розгляньте можливість використання зовнішнього сховища для файлів

### 3. "Function Execution Timeout"
- Vercel має обмеження на час виконання функції (10 секунд для безкоштовного плану)
- Оптимізуйте код або розгляньте можливість використання платного плану